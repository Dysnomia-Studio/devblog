---
layout: post
title:  "Manufactur'inc DevBlog #2 - L'automatisation ne concerne pas seulement le gameplay"
tags: gamedev steam devblog manufacturinc
categories: gamedev
---

[Ce post a √©t√© originellement publi√© sur Steam](https://store.steampowered.com/news/app/2146380/view/3737483611565199154)

**Historique du DevBlog**
1.  [09/2023 - #1 - Qui ? Quoi ? O√π ? Quand ?](https://store.steampowered.com/news/app/2146380/view/7184986051960660929)
2.  **10/2023 - #2 - L'automatisation ne concerne pas seulement le gameplay** (Ici !)
[/olist]

Bonjour !

Bienvenue sur ce deuxi√®me devblog de **Manufactur'inc** !
Si vous n'avez pas lu le premier et que vous voulez en savoir plus sur le jeu, vous pouvez [le lire ici](https://store.steampowered.com/news/app/2146380/view/7184986051960660929) !

Aujourd'hui, nous allons parler d'*automatisation*, mais pas celle que vous pourrez mettre en place dans le jeu, nous allons parler de la fa√ßon dont j'automatise mes propres process/outils pour me faciliter la vie afin de **sortir des mises √† jour plus rapidement** et **tester automatiquement des parties enti√®res du jeu**.

Comme je l'ai dit dans le premier devblog, je suis ici pour vulgariser les choses. J'esp√®re partager des morceaux de ma vie de d√©veloppeur avec tout le monde ici sans entrer dans les d√©tails techniques :)

# Mises √† jour automatiques

Une chose qui m'a fait perdre *beaucoup* de temps sur mon premier jeu, c'est la publication des mises √† jour. Vous n'imaginez pas √† quel point c'est p√©nible de construire manuellement un jeu pour 3 syst√®mes d'exploitation (Windows, MacOS, Linux) et deux architectures chacun (32bits/64bits, sauf pour MacOS qui n'a que cette derni√®re).

Donc, quelque chose que j'ai mis en place il y a 3 ans avec [Exortion](https://store.steampowered.com/app/1299430/Extortion/) √©tait de cr√©er automatiquement les 5 builds sur un serveur √† chaque fois que j'allais "sauvegarder mon code" sur celui-ci.

Cela a r√©duit le temps que je consacrais √† la sortie d'une mise √† jour de plus d'une heure √† ~15 minutes : t√©l√©charger 5 fichiers .zip depuis mon serveur, les envoyer sur Steam et itch, d√©clencher la mise √† jour de Steam, et c'est parti !

Vous avez envie de dire "C'est cool" ?
Oui, mais certaines am√©liorations √©taient encore possibles !

Un an plus tard, j'utilisais [SteamCMD](https://developer.valvesoftware.com/wiki/SteamCMD) pour pousser automatiquement vers les serveurs Steam et [Butler](https://itch.io/docs/butler/) pour pousser automatiquement vers itch.io.

Qu'est-ce qu'il me reste √† faire maintenant ? Appuyer sur le bouton "release", et √©crire une belle annonce de mise √† jour !

Voici donc ce que cela donne pour la d√©mo de [Exortion](https://store.steampowered.com/app/1299430/Extortion/) par exemple, plut√¥t cool non ? üòÅ

![](/assets/img/2023-10-18-manufacturinc-devblog-2_CI.png)

Bien s√ªr, Manufactur'inc dispose d√©j√† de cette automatisation, d√®s le premier jour de d√©veloppement (et c'est vraiment cool de l'avoir !) :

![](/assets/img/2023-10-18-manufacturinc-devblog-2_CI_2.png)

# Tests automatis√©s

Un autre sujet important qui a pris beaucoup de temps dans les actions r√©p√©titives √©tait les tests. Pouvoir re-tester toutes les fonctionnalit√©s d'un jeu avant une mise √† jour est quelque chose de presque impossible √† faire manuellement (et on ne parle m√™me pas du temps pass√© !).

L'automatisation des tests est quelque chose de courant dans mon domaine d'origine (le d√©veloppement web) et j'ai voulu l'appliquer √† mes jeux √©galement, cela permet d'√©viter beaucoup de bugs (pas tous, malheureusement !) et de tester des dizaines de fois plus vite qu'un humain, tout en √©tant plus fiable !

Alors, comment et qu'est-ce que je teste ? Je fais deux types de tests :
- Des tests sp√©cifiques √† une fonctionnalit√© (appel√©s tests unitaires)
- Tests "globaux" (appel√©s "end-to-end")

### Tests unitaires

Un bon exemple de **test unitaire** est cette partie de l'interface utilisateur :  
![](/assets/img/2023-10-18-manufacturinc-devblog-2_UI_Unit_Test.png)

Je dois v√©rifier que le num√©ro s'affiche correctement, par exemple

"123" s'affiche comme "123"
"1230" s'affiche comme "1.23K"
"1200001" est affich√© comme "1.2M"
et ainsi de suite

Ainsi, j'ai donc √©crit de nombreuses r√®gles √† ce sujet, et √† chaque fois que je lance des tests, ils v√©rifient que c'est correct ! Ainsi, si jamais je modifie le syst√®me parce que j'ai besoin d'avoir "P" apr√®s "K" (=1 000), "M" (=1 000 000), "G" (=1 000 000 000), "T" (=1 000 000 000), je peux √™tre s√ªr que je n'ai pas accidentellement cass√© quoi que ce soit !

### Les tests End-to-end

Pour ce qui est des tests **end-to-end**, je vais tester un sc√©nario du d√©but √† la fin, par ex :
- Se connecter au jeu
- Placer un b√¢timent
- V√©rifier que la ressource X est g√©n√©r√©e
- Aller dans l'onglet des contrats
- V√©rifier que nous avons r√©ussi √† contacter Y (parce qu'il nous a demand√© de construire ce b√¢timent)
- et ainsi de suite

Si vous voulez voir √† quoi cela ressemble pour [Alchemistry](https://store.steampowered.com/app/1730540/Alchemistry/) vous pouvez regarder une vid√©o [ici](https://cloud.dysnomia.studio/f/52ec625f17684a2284b6/) (D√©sol√©, je ne peux pas l'int√©grer sur Steam !).
Ou un autre exemple sympa pour Extortion :
![](/assets/img/2023-10-18-manufacturinc-devblog-2_Extortion_Test.gif)

Les outils de test et d'administration ont √©t√© mes priorit√©s depuis l'annonce du jeu (c'est pourquoi j'en parle ici). Ces outils me permettront de travailler plus facilement et plus rapidement √† l'avenir (et j'en aurai besoin, puisque je serai seul sur ce projet !), ils sont donc une priorit√©.

# Conclusion

J'esp√®re que vous avez aim√© ce petit tour d'horizon des coulisses du d√©veloppement de mes jeux !
Si vous pensez que des choses pourraient √™tre am√©lior√©es, vous pouvez ajouter un commentaire sous cet article et je serais ravi d'en parler ! Vous pouvez √©galement [rejoindre le discord de Dysnomia](https://discord.com/invite/c8aARey) pour que nous puissions en parler !

Si vous souhaitez me suivre ailleurs et obtenir plus qu'une mise √† jour mensuelle sur l'√©tat du jeu, vous pouvez:
- [Rejoindre le Discord de Dysnomia](https://discord.com/invite/c8aARey)
- [Me suivre sur Tiktok](https://www.tiktok.com/@elanis42) (j'essaierai de poster autant que possible ici, mais ca prend beaucoup de temps !)
- [Suivez-moi sur Twitch](https://www.twitch.tv/elanis42) o√π je fais parfois du d√©veloppement de jeux en live.
- [Suivez-moi sur mastodon](https://mastodon.gamedev.place/@Elanis)
- [Suivez mon nouveau compte Bluesky !](https://bsky.app/profile/elanis.eu)

Merci d'avoir lu ce second devblog, et bon week-end !
Elanis